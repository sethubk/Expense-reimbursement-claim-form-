<div class="header1">
  <h1>Expense reimbursement Page </h1>
</div>


<div *ngIf="personalData ">
  <clr-accordion>
    <clr-accordion-panel [clrAccordionPanelOpen]="true">
      <clr-accordion-title>Personal Datails</clr-accordion-title>
      <clr-accordion-content>
        <div class="personal-info-row">
          <p><strong>Date of Submission:</strong> {{ personalData.today }}</p>
          <p><strong>Expense Statement of:</strong> {{ personalData.username }}</p>
          <p><strong>Employee Code:</strong> {{ personalData.employeeCode }}</p>
          <p><strong>Purpose & Place:</strong> {{ personalData.purposePlace }}</p>
          <p><strong>Company & Plant:</strong> {{ personalData.companyPlant }}</p>
          <p><strong>Cost Center:</strong> {{ personalData.costCenter }}</p>
          <p><strong>Vendor Code:</strong> {{ personalData.vendorCode }}</p>
        </div>
      </clr-accordion-content>
    </clr-accordion-panel>
  </clr-accordion>

</div>


<button class="btn btn-primary" (click)="openmodel()">Fill the Expense Claim form </button>

<clr-modal [(clrModalOpen)]="formopen" [clrModalSize]="'md'" class="model">
  <div class="modal-body">
    <div class="modal-title">
      <h1>Expense Claim</h1>
    </div>
    <form clrForm #epenseForm="ngForm" class="expense-form">

      <clr-input-container>
        <label>Date</label>
        <input clrInput type="date" [(ngModel)]="formData.date" name="date" required [max]="maxDate" />
      </clr-input-container>

      <clr-input-container>
        <label>Supporting No</label>
        <input clrInput type="text" [(ngModel)]="formData.supportingNo" name="supportingNo" required />
      </clr-input-container>



      <clr-select-container>
        <label>Particulars</label>
        <select clrSelect [(ngModel)]="formData.particulars" name="particulars" required>
          <option value="Hotel">Hotel</option>
          <option value="Transport">Transport</option>
          <option value="Food">Food</option>
          <option value="Allowance">Allowance</option>
          <option value="Communication">Communication</option>
          <option value="Visa Process Fees">Visa Process Fees</option>
          <option value="Others">Others</option>
        </select>
      </clr-select-container>

      <clr-select-container>
        <label>Payment Mode</label>
        <select clrSelect [(ngModel)]="formData.paymentMode" name="paymentMode" required>
          <option value="Cash">Cash</option>
        </select>
      </clr-select-container>




      <clr-input-container class="amount1">
        <label>Amount</label>
        <input clrInput type="number" [(ngModel)]="formData.amount" name="amount" required />
      </clr-input-container>
      <clr-textarea-container class="remarks-box">
        <label>Remarks</label>
        <textarea clrTextarea [(ngModel)]="formData.remarks" name="remarks"></textarea>
      </clr-textarea-container>
      <div class="amount12">

        <label class="Screenshot">Screenshot</label>
        <input clrInput type="file" (change)="onFileChange($event)" accept="image/*" />
        <img *ngIf="preview" [src]="preview" class="preview" />
      </div>





      <div class="actions">
        <button class="submit-btn" [disabled]="!epenseForm.valid" type="button" (click)="addEntry(epenseForm)">
          {{!isEdit? 'Add': 'Update'}}</button>
        <button class="btn-outline-danger" type="reset">Reset</button>
      </div>
    </form>


  </div>

</clr-modal>



<div class="datagriid">
  <clr-datagrid>
    <clr-dg-column>Sno</clr-dg-column>
    <clr-dg-column>Date</clr-dg-column>
    <clr-dg-column>Supporting No</clr-dg-column>
    <clr-dg-column>Particulars</clr-dg-column>
    <clr-dg-column>Payment Mode</clr-dg-column>
    <clr-dg-column>Amount</clr-dg-column>
    <clr-dg-column>Remarks</clr-dg-column>
    <clr-dg-column>Screenshot</clr-dg-column>

    <clr-dg-column>Actions</clr-dg-column>

    <clr-dg-row *ngFor="let entry of entries let i = index">
      <clr-dg-cell>{{ i +1}}</clr-dg-cell>
      <clr-dg-cell>{{ entry.date }}</clr-dg-cell>
      <clr-dg-cell>{{ entry.supportingNo }}</clr-dg-cell>
      <clr-dg-cell>{{ entry.particulars }}</clr-dg-cell>
      <clr-dg-cell>{{ entry.paymentMode }}</clr-dg-cell>
      <clr-dg-cell>{{ entry.amount }}</clr-dg-cell>
      <clr-dg-cell>{{ entry.remarks }}</clr-dg-cell>
      <clr-dg-cell>
        <img *ngIf="entry.preview" [src]="entry.preview" alt="Preview" class="thumb" />
      </clr-dg-cell>


      <clr-dg-cell>
        <button class="crud-btn remove" (click)="removeentry(i)">
          <cds-icon shape="trash"></cds-icon>
        </button>
        <button class="crud-btn edit" (click)="Editentry(entry, i)">
          <cds-icon shape="pencil"></cds-icon>
        </button>
      </clr-dg-cell>



    </clr-dg-row>

    <clr-dg-footer>
      <clr-dg-pagination #pagination [clrDgPageSize]="10">
        <clr-dg-page-size [clrPageSizeOptions]="[10, 20, 50, 100]">
          Items per page
        </clr-dg-page-size>
        {{ pagination.firstItem + 1 }} - {{ pagination.lastItem + 1 }} of
        {{ pagination.totalItems }} items
      </clr-dg-pagination>
    </clr-dg-footer>
  </clr-datagrid>





</div>

<div class="backbtn">

</div>

<div class="preview1">
    <button class="btn btn-info" (click)="backbtn()">back to </button>
  <button class="btn btn-primary" [disabled]="!entries.length" (click)="gotoreview()"> review </button>
</div>